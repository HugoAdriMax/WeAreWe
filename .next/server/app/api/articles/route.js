(()=>{var e={};e.id=487,e.ids=[487],e.modules={56037:e=>{"use strict";e.exports=require("mongoose")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},29677:(e,r,t)=>{"use strict";t.r(r),t.d(r,{patchFetch:()=>f,routeModule:()=>d,serverHooks:()=>x,workAsyncStorage:()=>m,workUnitAsyncStorage:()=>g});var s={};t.r(s),t.d(s,{GET:()=>u,POST:()=>p});var n=t(42706),a=t(28203),o=t(45994),i=t(39187),l=t(12365),c=t(78284);async function u(e){try{await (0,l.A)();let r=e.nextUrl.searchParams.get("slug");if(r){let e=await c.n.find({slug:r}).sort({date:-1});return i.NextResponse.json(e)}let t=await c.n.find().sort({date:-1});return i.NextResponse.json(t)}catch(e){return console.error("Erreur lors de la r\xe9cup\xe9ration des articles:",e),i.NextResponse.json({error:"Erreur lors de la r\xe9cup\xe9ration des articles"},{status:500})}}async function p(e){try{let{title:r,url:t,metaDescription:s,imageUrl:n,content:a}=await e.json();if(!r||!s||!a||!n)return i.NextResponse.json({error:"Champs manquants"},{status:400});await (0,l.A)();let o=t||r.trim().toLowerCase().replace(/[àáâäæãåā]/g,"a").replace(/[çćč]/g,"c").replace(/[èéêëēėę]/g,"e").replace(/[îïíīįì]/g,"i").replace(/[ôöòóœøōõ]/g,"o").replace(/[ùûüūú]/g,"u").replace(/[ÿ]/g,"y").replace(/[ñ]/g,"n").replace(/[^a-z0-9]/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,""),u=await c.n.create({title:r,slug:o,metaDescription:s,imageUrl:n,content:a});return i.NextResponse.json(u,{status:201})}catch(e){return console.error("Erreur lors de la cr\xe9ation de l'article:",e),i.NextResponse.json({error:"Erreur lors de la cr\xe9ation de l'article"},{status:500})}}let d=new n.AppRouteRouteModule({definition:{kind:a.RouteKind.APP_ROUTE,page:"/api/articles/route",pathname:"/api/articles",filename:"route",bundlePath:"app/api/articles/route"},resolvedPagePath:"/Users/pascallevy/Documents/WeAreWe/app/api/articles/route.ts",nextConfigOutput:"",userland:s}),{workAsyncStorage:m,workUnitAsyncStorage:g,serverHooks:x}=d;function f(){return(0,o.patchFetch)({workAsyncStorage:m,workUnitAsyncStorage:g})}},96487:()=>{},78335:()=>{},12365:(e,r,t)=>{"use strict";t.d(r,{A:()=>l});var s=t(56037),n=t.n(s);if(!process.env.MONGODB_URI)throw Error("Please define the MONGODB_URI environment variable inside .env.local");let a=process.env.MONGODB_URI,o=global,i=o.mongoose;i||(i=o.mongoose={conn:null,promise:null});let l=async function(){if(i.conn)return i.conn;i.promise||(i.promise=n().connect(a,{bufferCommands:!1,dbName:"sample_mflix"}).then(e=>e));try{i.conn=await i.promise}catch(e){throw i.promise=null,e}return i.conn}},78284:(e,r,t)=>{"use strict";t.d(r,{n:()=>o});var s=t(56037),n=t.n(s);let a=new s.Schema({title:{type:String,required:!0},slug:{type:String,required:!0,unique:!0},metaDescription:{type:String,required:!0},imageUrl:{type:String,required:!0},content:{type:String,required:!0},date:{type:Date,default:Date.now},author:{type:String,default:"WeAreWe Team"}}),o=n().models.Article||n().model("Article",a,"articles")}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[370,452],()=>t(29677));module.exports=s})();